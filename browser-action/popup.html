<html>
  <head>
    <script type="text/javascript">
      // this gets evaluated each and every time the popup is opened.
      // window.init_date is ALWAYS null because it is not persisted.
      if (window.init_date == null)
        window.init_date = Date();

      alert("You opened the popup!");

      var random_rgb_color = [
        Math.floor(Math.random() * 256),
        Math.floor(Math.random() * 256),
        Math.floor(Math.random() * 256)
      ];

      var brought_to_you_by_the_letter = [ 'A', 'B', 'C', 'D', 'E' ][Math.floor(Math.random() * 5)];

      chrome.browserAction.setBadgeText({ text: brought_to_you_by_the_letter });
      chrome.browserAction.setBadgeBackgroundColor({ color: random_rgb_color });

      function update_date(){
        document.getElementById("init_date").innerHTML = window.init_date.toString();
      }
    </script>
  </head>
  <body onLoad="update_date();">
    <p>Hello from Browser Action!</p>
    <p id="init_date"></p>
  </body>
</html>
